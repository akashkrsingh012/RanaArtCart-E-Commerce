{"version":3,"sources":["../../../../../handmade-arts-e-commerce/app/wishlist/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useUser } from \"@/contexts/user-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect, useState } from \"react\"\nimport { Heart, ShoppingCart } from \"lucide-react\"\nimport { useCart } from \"@/hooks/use-cart\"\n\ninterface Product {\n  _id: string\n  name: string\n  price: number\n  description: string\n  category: string\n  image: string\n  stock: number\n  sellerId: string\n}\n\nexport default function WishlistPage() {\n  const { user, isLoggedIn, removeFromWishlist } = useUser()\n  const { addItem } = useCart()\n  const router = useRouter()\n  const [wishlistProducts, setWishlistProducts] = useState<Product[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // If we have a user, fetch their wishlist details\n    const fetchWishlist = async () => {\n      try {\n        const token = localStorage.getItem(\"accessToken\")\n        if (!token) return\n\n        const res = await fetch(\"/api/wishlist\", {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n\n        if (res.ok) {\n          const data = await res.json()\n          setWishlistProducts(data.wishlist || [])\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch wishlist\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (isLoggedIn) {\n      fetchWishlist()\n    } else if (!localStorage.getItem(\"accessToken\") && !loading) {\n      // If not logged in and not loading init state\n      router.push(\"/login\")\n    } else {\n      // give it a moment or wait for mounted\n      setLoading(false)\n    }\n  }, [isLoggedIn, router])\n\n  if (!user) return null\n\n  // Filter products based on current user context (IDs)\n  // This handles immediate removal from UI when removeFromWishlist is called\n  const displayItems = wishlistProducts.filter(p => user.wishlist.includes(p._id))\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-6xl mx-auto px-4 py-12\">\n        <h1 className=\"text-3xl font-bold text-foreground mb-8\">My Wishlist</h1>\n\n        {loading ? (\n          <div className=\"flex justify-center p-12\">Loading...</div>\n        ) : displayItems.length === 0 ? (\n          <div className=\"bg-card rounded-lg border border-border p-12 text-center\">\n            <Heart size={48} className=\"mx-auto text-muted-foreground mb-4\" />\n            <h2 className=\"text-xl font-semibold text-foreground mb-2\">Your wishlist is empty</h2>\n            <p className=\"text-muted-foreground mb-6\">Add items to your wishlist to save them for later</p>\n            <button\n              onClick={() => router.push(\"/\")}\n              className=\"bg-primary text-primary-foreground px-6 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity\"\n            >\n              Continue Shopping\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {displayItems.map((product) => (\n              <div\n                key={product._id}\n                className=\"bg-card rounded-lg overflow-hidden border border-border hover:shadow-lg transition-shadow\"\n              >\n                <div className=\"relative\">\n                  <img\n                    src={product.image || \"/placeholder.svg\"}\n                    alt={product.name}\n                    className=\"w-full h-48 object-cover\"\n                  />\n                  <button\n                    onClick={() => removeFromWishlist(product._id)}\n                    className=\"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-muted transition-colors\"\n                    aria-label=\"Remove from wishlist\"\n                  >\n                    <Heart size={18} fill=\"#C85A17\" color=\"#C85A17\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4\">\n                  <h3 className=\"font-semibold text-sm text-foreground line-clamp-2 mb-1\">{product.name}</h3>\n\n                  <div className=\"flex items-center gap-2 mb-3\">\n                    <span className=\"text-lg font-bold text-primary\">â‚¹{product.price.toLocaleString(\"en-IN\")}</span>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      addItem({\n                        id: product._id,\n                        name: product.name,\n                        price: product.price,\n                        image: product.image,\n                        quantity: 1,\n                      })\n                    }}\n                    className=\"w-full bg-secondary text-secondary-foreground py-2 rounded-lg font-semibold hover:bg-primary hover:text-primary-foreground transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <ShoppingCart size={16} />\n                    Add to Cart\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}