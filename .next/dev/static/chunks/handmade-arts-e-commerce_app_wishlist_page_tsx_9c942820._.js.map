{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/akash/Downloads/handmade-arts-e-commerce/app/wishlist/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useUser } from \"@/contexts/user-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect, useState } from \"react\"\nimport { Heart, ShoppingCart } from \"lucide-react\"\nimport { useCart } from \"@/hooks/use-cart\"\n\ninterface Product {\n  _id: string\n  name: string\n  price: number\n  description: string\n  category: string\n  image: string\n  stock: number\n  sellerId: string\n}\n\nexport default function WishlistPage() {\n  const { user, isLoggedIn, removeFromWishlist } = useUser()\n  const { addItem } = useCart()\n  const router = useRouter()\n  const [wishlistProducts, setWishlistProducts] = useState<Product[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // If we have a user, fetch their wishlist details\n    const fetchWishlist = async () => {\n      try {\n        const token = localStorage.getItem(\"accessToken\")\n        if (!token) return\n\n        const res = await fetch(\"/api/wishlist\", {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n\n        if (res.ok) {\n          const data = await res.json()\n          setWishlistProducts(data.wishlist || [])\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch wishlist\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    if (isLoggedIn) {\n      fetchWishlist()\n    } else if (!localStorage.getItem(\"accessToken\") && !loading) {\n      // If not logged in and not loading init state\n      router.push(\"/login\")\n    } else {\n      // give it a moment or wait for mounted\n      setLoading(false)\n    }\n  }, [isLoggedIn, router])\n\n  if (!user) return null\n\n  // Filter products based on current user context (IDs)\n  // This handles immediate removal from UI when removeFromWishlist is called\n  const displayItems = wishlistProducts.filter(p => user.wishlist.includes(p._id))\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-6xl mx-auto px-4 py-12\">\n        <h1 className=\"text-3xl font-bold text-foreground mb-8\">My Wishlist</h1>\n\n        {loading ? (\n          <div className=\"flex justify-center p-12\">Loading...</div>\n        ) : displayItems.length === 0 ? (\n          <div className=\"bg-card rounded-lg border border-border p-12 text-center\">\n            <Heart size={48} className=\"mx-auto text-muted-foreground mb-4\" />\n            <h2 className=\"text-xl font-semibold text-foreground mb-2\">Your wishlist is empty</h2>\n            <p className=\"text-muted-foreground mb-6\">Add items to your wishlist to save them for later</p>\n            <button\n              onClick={() => router.push(\"/\")}\n              className=\"bg-primary text-primary-foreground px-6 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity\"\n            >\n              Continue Shopping\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {displayItems.map((product) => (\n              <div\n                key={product._id}\n                className=\"bg-card rounded-lg overflow-hidden border border-border hover:shadow-lg transition-shadow\"\n              >\n                <div className=\"relative\">\n                  <img\n                    src={product.image || \"/placeholder.svg\"}\n                    alt={product.name}\n                    className=\"w-full h-48 object-cover\"\n                  />\n                  <button\n                    onClick={() => removeFromWishlist(product._id)}\n                    className=\"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-muted transition-colors\"\n                    aria-label=\"Remove from wishlist\"\n                  >\n                    <Heart size={18} fill=\"#C85A17\" color=\"#C85A17\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4\">\n                  <h3 className=\"font-semibold text-sm text-foreground line-clamp-2 mb-1\">{product.name}</h3>\n\n                  <div className=\"flex items-center gap-2 mb-3\">\n                    <span className=\"text-lg font-bold text-primary\">â‚¹{product.price.toLocaleString(\"en-IN\")}</span>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      addItem({\n                        id: product._id,\n                        name: product.name,\n                        price: product.price,\n                        image: product.image,\n                        quantity: 1,\n                      })\n                    }}\n                    className=\"w-full bg-secondary text-secondary-foreground py-2 rounded-lg font-semibold hover:bg-primary hover:text-primary-foreground transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <ShoppingCart size={16} />\n                    Add to Cart\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}