{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/akash/Downloads/handmade-arts-e-commerce/hooks/use-cart.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\n\nexport interface CartItem {\n  id: string\n  name: string\n  price: number\n  image: string\n  quantity: number\n}\n\ninterface CartContextType {\n  items: CartItem[]\n  addItem: (item: CartItem) => void\n  removeItem: (id: string) => void\n  updateQuantity: (id: string, quantity: number) => void\n  clearCart: () => void\n}\n\nconst STORAGE_KEY = \"ranaartcart_cart\"\n\nexport function useCart(): CartContextType {\n  const [items, setItems] = useState<CartItem[]>([])\n  const [mounted, setMounted] = useState(false)\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem(STORAGE_KEY)\n    if (savedCart) {\n      try {\n        setItems(JSON.parse(savedCart))\n      } catch (e) {\n        console.error(\"Failed to load cart:\", e)\n      }\n    }\n    setMounted(true)\n  }, [])\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    if (mounted) {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(items))\n    }\n  }, [items, mounted])\n\n  const addItem = useCallback((newItem: CartItem) => {\n    setItems((prevItems) => {\n      const existingItem = prevItems.find((item) => item.id === newItem.id)\n      if (existingItem) {\n        return prevItems.map((item) =>\n          item.id === newItem.id ? { ...item, quantity: item.quantity + newItem.quantity } : item,\n        )\n      }\n      return [...prevItems, newItem]\n    })\n  }, [])\n\n  const removeItem = useCallback((id: string) => {\n    setItems((prevItems) => prevItems.filter((item) => item.id !== id))\n  }, [])\n\n  const updateQuantity = useCallback((id: string, quantity: number) => {\n    setItems((prevItems) => prevItems.map((item) => (item.id === id ? { ...item, quantity } : item)))\n  }, [])\n\n  const clearCart = useCallback(() => {\n    setItems([])\n  }, [])\n\n  return { items, addItem, removeItem, updateQuantity, clearCart }\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAoBA,MAAM,cAAc;AAEb,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sPAAQ,EAAa,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sPAAQ,EAAC;IAEvC,uCAAuC;IACvC,IAAA,uPAAS,EAAC;QACR,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,IAAI;gBACF,SAAS,KAAK,KAAK,CAAC;YACtB,EAAE,OAAO,GAAG;gBACV,QAAQ,KAAK,CAAC,wBAAwB;YACxC;QACF;QACA,WAAW;IACb,GAAG,EAAE;IAEL,gDAAgD;IAChD,IAAA,uPAAS,EAAC;QACR,IAAI,SAAS;YACX,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;QACnD;IACF,GAAG;QAAC;QAAO;KAAQ;IAEnB,MAAM,UAAU,IAAA,yPAAW,EAAC,CAAC;QAC3B,SAAS,CAAC;YACR,MAAM,eAAe,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,EAAE;YACpE,IAAI,cAAc;gBAChB,OAAO,UAAU,GAAG,CAAC,CAAC,OACpB,KAAK,EAAE,KAAK,QAAQ,EAAE,GAAG;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG,QAAQ,QAAQ;oBAAC,IAAI;YAEvF;YACA,OAAO;mBAAI;gBAAW;aAAQ;QAChC;IACF,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,yPAAW,EAAC,CAAC;QAC9B,SAAS,CAAC,YAAc,UAAU,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IACjE,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,yPAAW,EAAC,CAAC,IAAY;QAC9C,SAAS,CAAC,YAAc,UAAU,GAAG,CAAC,CAAC,OAAU,KAAK,EAAE,KAAK,KAAK;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI;IAC5F,GAAG,EAAE;IAEL,MAAM,YAAY,IAAA,yPAAW,EAAC;QAC5B,SAAS,EAAE;IACb,GAAG,EAAE;IAEL,OAAO;QAAE;QAAO;QAAS;QAAY;QAAgB;IAAU;AACjE"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/akash/Downloads/handmade-arts-e-commerce/app/products/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, use } from \"react\"\nimport { ShoppingCart, Star, Heart, ArrowLeft, Loader2 } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { useCart } from \"@/hooks/use-cart\"\n\ninterface Product {\n    _id: string;\n    name: string;\n    category: string;\n    price: number;\n    originalPrice?: number;\n    image: string;\n    rating?: number;\n    reviews?: number;\n    artist?: string;\n    description?: string;\n}\n\nexport default function ProductDetailsPage({ params }: { params: Promise<{ id: string }> }) {\n    // Unwrap params using React.use() as recommended in Next.js 15\n    const unwrappedParams = use(params)\n    const { id } = unwrappedParams\n\n    const [product, setProduct] = useState<Product | null>(null)\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n    const [isWishlisted, setIsWishlisted] = useState(false)\n    const [isAdded, setIsAdded] = useState(false)\n    const { addItem } = useCart()\n\n    useEffect(() => {\n        const fetchProduct = async () => {\n            try {\n                const res = await fetch(`/api/products/${id}`)\n                if (!res.ok) {\n                    if (res.status === 404) throw new Error(\"Product not found\")\n                    throw new Error(\"Failed to fetch product\")\n                }\n                const data = await res.json()\n                setProduct(data.product)\n            } catch (err: any) {\n                setError(err.message || \"Something went wrong\")\n            } finally {\n                setLoading(false)\n            }\n        }\n        fetchProduct()\n    }, [id])\n\n    const handleAddToCart = () => {\n        if (!product) return\n        addItem({\n            id: product._id,\n            name: product.name,\n            price: product.price,\n            image: product.image,\n            quantity: 1,\n        })\n        setIsAdded(true)\n        setTimeout(() => setIsAdded(false), 2000)\n    }\n\n    const handleBuyNow = () => {\n        handleAddToCart()\n        // Optionally redirect to cart or checkout using: window.location.href = '/cart'\n        // For now, consistent with requirements, we add to cart.\n    }\n\n    if (loading) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center bg-background\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            </div>\n        )\n    }\n\n    if (error || !product) {\n        return (\n            <div className=\"min-h-screen flex flex-col items-center justify-center bg-background gap-4\">\n                <h1 className=\"text-2xl font-bold text-destructive\">Error</h1>\n                <p className=\"text-muted-foreground\">{error || \"Product not found\"}</p>\n                <Link href=\"/\" className=\"text-primary hover:underline flex items-center gap-2\">\n                    <ArrowLeft size={16} /> Back to Home\n                </Link>\n            </div>\n        )\n    }\n\n    const discount = product.price && product.originalPrice\n        ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)\n        : 0\n\n    // Mock rating/reviews if not in DB\n    const rating = product.rating || 4.5\n    const reviews = product.reviews || 0\n    const artist = product.artist || \"Verified Seller\"\n\n    return (\n        <div className=\"min-h-screen bg-background py-8 px-4 sm:px-6 lg:px-8\">\n            <div className=\"max-w-7xl mx-auto\">\n                <Link\n                    href=\"/\"\n                    className=\"inline-flex items-center gap-2 text-muted-foreground hover:text-primary mb-8 transition-colors\"\n                >\n                    <ArrowLeft size={20} />\n                    Back to Products\n                </Link>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\n                    {/* Image Section */}\n                    <div className=\"relative aspect-square lg:aspect-auto lg:h-[600px] rounded-2xl overflow-hidden bg-muted group\">\n                        <img\n                            src={product.image || \"/placeholder.svg\"}\n                            alt={product.name}\n                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                        />\n                        <button\n                            onClick={() => setIsWishlisted(!isWishlisted)}\n                            className=\"absolute top-4 right-4 p-3 bg-white/90 backdrop-blur-sm rounded-full shadow-lg hover:bg-white transition-all transform hover:scale-110\"\n                        >\n                            <Heart\n                                size={24}\n                                fill={isWishlisted ? \"#C85A17\" : \"none\"}\n                                color={isWishlisted ? \"#C85A17\" : \"#7A6B5C\"}\n                            />\n                        </button>\n                    </div>\n\n                    {/* Details Section */}\n                    <div className=\"flex flex-col space-y-8\">\n                        <div>\n                            <div className=\"flex items-center gap-2 text-primary font-medium mb-2\">\n                                <span className=\"bg-primary/10 px-3 py-1 rounded-full text-sm\">\n                                    {product.category || \"Art\"}\n                                </span>\n                                <span className=\"text-muted-foreground text-sm\">by {artist}</span>\n                            </div>\n                            <h1 className=\"text-4xl font-bold text-foreground mb-4 leading-tight\">\n                                {product.name}\n                            </h1>\n\n                            <div className=\"flex items-center gap-4 mb-6\">\n                                <div className=\"flex items-center bg-secondary/30 px-3 py-1 rounded-lg\">\n                                    {Array.from({ length: 5 }).map((_, i) => (\n                                        <Star\n                                            key={i}\n                                            size={18}\n                                            fill={i < Math.floor(rating) ? \"#C85A17\" : \"transparent\"}\n                                            stroke={i < Math.floor(rating) ? \"#C85A17\" : \"#E0D5C7\"}\n                                            className=\"mr-0.5\"\n                                        />\n                                    ))}\n                                    <span className=\"ml-2 text-sm font-medium text-foreground\">{rating}</span>\n                                </div>\n                                <span className=\"text-muted-foreground text-sm\">({reviews} reviews)</span>\n                            </div>\n\n                            <div className=\"flex items-end gap-4 mb-8\">\n                                <span className=\"text-4xl font-bold text-primary\">\n                                    ₹{product.price.toLocaleString(\"en-IN\")}\n                                </span>\n                                {product.originalPrice && (\n                                    <>\n                                        <span className=\"text-xl text-muted-foreground line-through mb-1\">\n                                            ₹{product.originalPrice.toLocaleString(\"en-IN\")}\n                                        </span>\n                                        <span className=\"text-green-600 font-bold mb-1 bg-green-100 px-2 py-0.5 rounded text-sm\">\n                                            {discount}% OFF\n                                        </span>\n                                    </>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"prose prose-stone dark:prose-invert max-w-none\">\n                            <h3 className=\"text-lg font-semibold mb-2\">Description</h3>\n                            <p className=\"text-muted-foreground leading-relaxed\">\n                                {product.description || \"No description available for this masterpiece.\"}\n                            </p>\n                        </div>\n\n                        <div className=\"flex gap-4 pt-6 mt-auto\">\n                            <button\n                                onClick={handleAddToCart}\n                                className={`flex-1 h-14 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-3 ${isAdded\n                                    ? \"bg-green-600 text-white shadow-green-200\"\n                                    : \"bg-secondary text-secondary-foreground hover:bg-primary/10 border-2 border-primary/20 hover:border-primary\"\n                                    }`}\n                            >\n                                <ShoppingCart size={24} />\n                                {isAdded ? \"Added to Cart\" : \"Add to Cart\"}\n                            </button>\n\n                            <button\n                                onClick={handleBuyNow}\n                                className=\"flex-1 h-14 rounded-xl font-bold text-lg bg-primary text-primary-foreground hover:bg-primary/90 shadow-lg shadow-primary/25 hover:shadow-primary/40 transition-all active:scale-[0.98]\"\n                            >\n                                Buy Now\n                            </button>\n                        </div>\n\n                        <div className=\"grid grid-cols-3 gap-4 pt-8 border-t border-border\">\n                            <div className=\"text-center\">\n                                <div className=\"font-semibold text-foreground\">Free Shipping</div>\n                                <div className=\"text-xs text-muted-foreground\">On orders over ₹999</div>\n                            </div>\n                            <div className=\"text-center border-l border-border\">\n                                <div className=\"font-semibold text-foreground\">Authentic</div>\n                                <div className=\"text-xs text-muted-foreground\">100% Original Art</div>\n                            </div>\n                            <div className=\"text-center border-l border-border\">\n                                <div className=\"font-semibold text-foreground\">Secure</div>\n                                <div className=\"text-xs text-muted-foreground\">Protected Payments</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}